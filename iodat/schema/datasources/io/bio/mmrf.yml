#
# MMRF CoMMppass datasource config
# 
# From MMRF_CoMMpass_IA15_Methods.pdf:
#
# Over the course of this project we made multiple modifications to the exome preparations. 
# Initially the TruSeq Exome kit from Illumina (Kit Code = TSE61) was used, however, this 
# commercial kit was discontinued.  Subsequently, we showed that the Agilent Sureselect 
# V5+UTR exome capture kit covered the majority of the same space plus additional space. 
# Through independent testing we elected to use whole genome library preparations kits from 
# KAPA Biosystems in combination with the Agilent Hybrid capture kits. However, in attempts 
# to increase the number of analyzed patients we have used three independent whole 
# genome library preparation kits from KAPA Biosystems (Kit Codes = KAS5U, KBS5U, and
# KHS5U).
#
name: 'mmrf'
datasets:
  - name: 'rnaseq'
    title: "MMRF CoMMpass Trial RNA-Seq Data"
    datasource: 'mmrf'
    experiment: 'commpass'
    processing: 'counts_per_million'
    path: '/data/clean/mmrf/IA15/rnaseq/MMRF_CoMMpass_IA15a_E74GTF_HtSeq_Gene_Counts_1_BM_symbols_nr_CPM_GRCh38.feather'
    datatype: 'experimental_dataset'
    assay: 'rnaseq'
    platform: 'illumina_hiseq2000'
    provenance:
      - source: 'MMRF CoMMpass Trial'
        version: 'IA15'
        url: 'https://research.themmrf.org/'
      - action: 'counts_per_million' 
    rows:
      name: 'symbol'
    columns:
      name: 'patient'
      path: '/data/clean/mmrf/IA15/clinical_data_tables/MMRF_CoMMpass_IA15_combined_metadata.feather'
  - name: 'mut'
    title: "MMRF CoMMpass Trial All Canonical NS Variants"
    datasource: 'mmrf'
    experiment: 'commpass'
    processing: 'snv_table'
    path: '/data/raw/mmrf/IA15/somatic_mutations_snv_indel/MMRF_CoMMpass_IA15a_All_Canonical_NS_Variants.txt'
    datatype: 'experimental_dataset'
    assay: 'whole_exome_sequencing'
    platform: 'whole_exome_sequencing_mixed'
    provenance:
      - source: 'MMRF CoMMpass Trial'
        version: 'IA15'
        url: 'https://research.themmrf.org/'
      - action: 'read_alignment'
        software:
          - name: 'BWA'
            version: 'v0.7.8'
          - name: 'SAMTools'
            version: 'v0.1.19'
        description: 'The WES and WGS sequencing reads were aligned to the reference genome using the mem module of bwa v0.7.8 and SAMtools v0.1.19 was used to produce sorted BAM files'
        doc: 'MMRF_CoMMpass_IA15_Methods.pdf'
      - action: 'somatic_snv_and_indel_detection'
        software:
          - name: 'Seurat'
            version: 'v2.6'
          - name: 'Strelka'
            version: 'v1.0.13'
          - name: 'MuTect'
            version: 'v1.1.4'
        description: 'Somatic SNVs and INDELs were identified using an integrated approach leveraging three different somatic variant callers: Seurat v2.6, Strelka v1.0.13, and MuTect v1.1.4. All three tools can independently detect somatic SNVs, and both Strelka and Seurat can detect INDELs. The results from these individual analyses were integrated into a single, merged VCF using a TGen-developed tool.'
        doc: 'MMRF_CoMMpass_IA15_Methods.pdf'
      - action: 'indel_normalization'
        software:
          - name: 'vt'
            version: 'v0.5'
        description: 'After filtering, the individual INDEL calls were normalized using vt normalize and the three SNV VCFs and two INDEL VCFs were merged to create a single VCF.' 
        doc: 'MMRF_CoMMpass_IA15_Methods.pdf'
      - action: 'annotation'
        annotations:
          - name: 'dbSNP'
            version: 'v147'
          - name: 'EXAC'
            version: 'v0.3'
          - name: 'NHLBI'
            version: 'v2-SSA137'
          - name: '1000G'
            version: 'phase3'
          - name: 'COSMIC coding mutations'
            version: 'v74'
          - name: 'COSMIC non-coding mutations'
            version: 'v74'
        software: 
          - name: 'GATK variant annotator'
            version: 'v3.5.0-g36282e4'
      - action: 'annotation'
        annotations:
          - name: 'dbNSFP'
            version: 'v2.9'
        software:
          - name: 'SnpEff/SnpSift'
            version: 'v4.2'
    rows:
      name: 'mutation'
    columns:
      name: 'patient'
      path: '/data/clean/mmrf/IA15/clinical_data_tables/MMRF_CoMMpass_IA15_combined_metadata.feather'
